---
import { languages } from "../i18n/ui";
import { getLangFromUrl } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);

const flags: { [key: string]: string } = {
    es: "ðŸ‡ªðŸ‡¸",
    en: "ðŸ‡¬ðŸ‡§",
};
---

<div class="relative group z-50">
    <button
        class="flex items-center gap-2 px-3 py-2 text-xl hover:scale-110 transition-transform duration-300"
        aria-label="Change Language"
    >
        <span>{flags[lang]}</span>
    </button>

    <div
        class="absolute right-0 top-full mt-1 w-32 bg-dark/90 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform origin-top-right scale-95 group-hover:scale-100"
    >
        <div class="p-2 space-y-1">
            {
                Object.entries(languages).map(([code, label]) => (
                    <a
                        href={`/${code}/`}
                        class={`flex items-center gap-3 px-3 py-2 rounded-lg text-sm hover:bg-white/10 transition-colors ${code === lang ? "text-primary font-bold bg-white/5" : "text-gray-400"}`}
                    >
                        <span class="text-base">{flags[code]}</span>
                        <span class="text-[10px] uppercase tracking-widest">
                            {label}
                        </span>
                    </a>
                ))
            }
        </div>
    </div>
</div>
