---
import { cn } from "../../lib/utils";

interface Props {
    id?: string;
    className?: string;
}

const { id, className } = Astro.props;
---

<section
    id={id}
    class={cn(
        "py-20 md:py-32 relative overflow-hidden reveal opacity-0 translate-y-8 transition-all duration-1000 ease-out",
        className,
    )}
>
    <slot />
</section>

<script>
    const observerOptions = {
        root: null,
        rootMargin: "0px",
        threshold: 0.1,
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                entry.target.classList.remove("opacity-0", "translate-y-8");
                entry.target.classList.add("opacity-100", "translate-y-0");
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    document.querySelectorAll(".reveal").forEach((el) => {
        observer.observe(el);
    });
</script>
